{% extends "base.html" %}
{% block title %}Order Details{% endblock %}
{% block extra_css %}
<style>
  .order-detail-card {
    border-radius: 18px;
    box-shadow: 0 4px 16px rgba(0,0,0,0.08);
    background: #fff;
    padding: 2rem;
    margin-bottom: 2rem;
  }
  .order-status {
    font-weight: 600;
    border-radius: 8px;
    padding: 0.35em 0.8em;
    font-size: 0.98rem;
    display: inline-block;
  }
  .order-status.pending { background: #ffe082; color: #7c6f00; }
  .order-status.completed { background: #c8e6c9; color: #256029; }
  .order-status.cancelled { background: #ffcdd2; color: #b71c1c; }
  .order-status.in_progress { background: #bbdefb; color: #0d47a1; }
  .order-items-table th, .order-items-table td {
    vertical-align: middle;
    padding: 0.75rem 0.5rem;
    font-size: 1.05rem;
  }
  .order-items-table th {
    background: #f5f5f5;
    font-weight: 600;
    color: #222;
    border-bottom: 2px solid #eee;
  }
  .order-items-table tbody tr:hover {
    background: #f8f9fa;
  }
</style>
{% endblock %}
{% block content %}
<div class="container py-5">
  <h1 class="fw-bold mb-4 text-center">Order #{{ order.id }}</h1>
  <div class="order-detail-card">
    <div class="row mb-3">
      <div class="col-md-6">
        <h5>Restaurant</h5>
        <p class="mb-1 fw-bold">{{ order.restaurant.name }}</p>
        <p class="mb-1 text-muted"><i class="bi bi-geo-alt me-1"></i>{{ order.restaurant.addresses.first.formatted_address }}</p>
      </div>
      <div class="col-md-6 text-md-end">
        <h5>Status</h5>
        <span class="order-status {{ order.status|lower|slugify }}">{{ order.get_status_display }}</span>
        <p class="mb-1 mt-2"><strong>Date:</strong> {{ order.created_at|date:"SHORT_DATETIME_FORMAT" }}</p>
      </div>
    </div>
    <h5 class="mt-4">Items</h5>
    <div class="table-responsive">
      <table class="table order-items-table">
        <thead>
          <tr>
            <th>Item</th>
            <th>Qty</th>
            <th>Unit Price</th>
            <th>Total</th>
          </tr>
        </thead>
        <tbody>
          {% for item in order.items.all %}
          <tr>
            <td>{{ item.menu_item.name }}</td>
            <td>{{ item.quantity }}</td>
            <td>{{ item.unit_price|floatformat:2 }} €</td>
            <td>{{ item.total_price|floatformat:2 }} €</td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="4" class="text-center text-muted">No items found.</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    <div class="row mt-4">
      <div class="col-md-6">
        <h5>Delivery Address</h5>
        <p>{{ order.delivery_address|default:"Pickup" }}</p>
      </div>
      <div class="col-md-6 text-md-end">
        <h5 class="mb-1">Total</h5>
        <p class="fs-4 fw-bold">{{ order.total|floatformat:2 }} €</p>
      </div>
    </div>
  </div>
  <a href="{% url 'order_list' %}" class="btn btn-outline-secondary">Back to Orders</a>
</div>
{% endblock %}
