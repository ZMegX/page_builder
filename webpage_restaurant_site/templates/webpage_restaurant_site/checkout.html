{% extends 'base.html' %}
{% block title %}Checkout Complete{% endblock %}
{% block content %}
<div class="container py-5">
  <h2 class="mb-4">Thank You For Your Order!</h2>
  <h5 class="mb-3">Order Number: <span class="text-primary">{{ order_number }}</span></h5>
  <div id="order-status" class="mb-3">
    <strong>Status:</strong> <span class="text-info">{{ order_status }}</span>
  </div>
  <h4 class="mb-3">Order Summary</h4>
  <table class="table table-bordered table-hover align-middle">
    <thead class="table-light">
      <tr>
        <th>Item</th>
        <th>Price</th>
        <th>Quantity</th>
        <th>Subtotal</th>
      </tr>
    </thead>
    <tbody>
      {% for item_id, item in cart.items %}
      <tr>
        <td>{{ item.name }}</td>
        <td>€{{ item.price|floatformat:2 }}</td>
        <td>{{ item.quantity }}</td>
        <td>€{{ item.price|floatformat:2|add:item.price|floatformat:2 }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  <div class="d-flex justify-content-between align-items-center mt-4">
    <h4>Total: €{{ total_price|floatformat:2 }}</h4>
    <span class="fw-bold">Option: {{ checkout_option }}</span>
  </div>
  <div class="mt-4">
    <h5>Payment Method: <span class="text-success">Cash</span></h5>
    <p class="lead">Please pay by cash upon delivery or pickup.</p>
  </div>
<div class="mt-5">
    <h5>Order Status</h5>
    <div class="alert alert-info">
      <strong>Status:</strong>
      {% if order_status %}
        <span class="badge bg-primary">{{ order_status }}</span>
      {% else %}
        <span class="badge bg-secondary">Pending</span>
      {% endif %}
    </div>
    <div class="mb-2">
      <span class="text-muted">Possible statuses: </span>
      <span class="badge bg-secondary">Pending</span>
      <span class="badge bg-warning">Preparing</span>
      <span class="badge bg-info">Ready</span>
      <span class="badge bg-success">Completed</span>
      <span class="badge bg-danger">Cancelled</span>
    </div>
    <a href="{% url 'order_list' %}" class="btn btn-primary">View My Orders</a>
    {% if order and order.id %}
      <a href="{% url 'order_detail' order.id %}" class="btn btn-outline-secondary">View This Order</a>
    {% endif %}
    <p class="small text-muted">You can refresh this page to check for updates to your order status.</p>
  </div>
</div>
{% endblock %}
