{% extends "base.html" %}
{% load static %}

{% block title %}
  {% if item %}{{ item.name }} | Menu Item{% else %}Menu Item{% endif %}
{% endblock %}

{% block content %}
<div class="container py-4">
  {% if item %}
  <div class="row g-4">
    <div class="col-12 col-lg-6">
      <div class="card shadow-sm h-100">
        {% if item.menu and item.menu.photo %}
          <img
            src="{{ item.menu.photo.url }}"
            class="card-img-top"
            alt="{{ item.menu.name }} photo"
            loading="lazy"
          >
        {% else %}
          <div class="ratio ratio-4x3 bg-light d-flex align-items-center justify-content-center">
            <span class="text-muted">No image available</span>
          </div>
        {% endif %}
        {% if item.menu %}
          <div class="card-footer text-muted small">
            Part of: {{ item.menu.name }}
          </div>
        {% endif %}
      </div>
    </div>

    <div class="col-12 col-lg-6">
      <div class="card shadow-sm">
        <div class="card-body">
          <div class="d-flex align-items-start justify-content-between gap-3">
            <div>
              <h1 class="h3 mb-1">{{ item.name }}</h1>
              <div class="d-flex align-items-center gap-2 flex-wrap">
                <span class="badge rounded-pill text-bg-secondary text-capitalize">
                  {{ item.get_section_display }}
                </span>
                {% if item.is_available %}
                  <span class="badge rounded-pill text-bg-success">Available</span>
                {% else %}
                  <span class="badge rounded-pill text-bg-danger">Unavailable</span>
                {% endif %}
              </div>
            </div>
            <div class="text-end">
              <div class="fs-4 fw-semibold">${{ item.price }}</div>
            </div>
          </div>

          <hr class="my-4">

          <div>
            <h2 class="h6 text-uppercase text-muted mb-2">Ingredients</h2>
            <p class="mb-0">{{ item.ingredients|linebreaksbr }}</p>
          </div>

          {% if is_owner %}
            <div class="mt-4 d-flex flex-wrap gap-2">
              <!-- Replace these with real links if you have URL names like 'menu_item_update' / 'menu_item_delete' -->
              <span class="btn btn-outline-primary disabled">Edit</span>
              <span class="btn btn-outline-danger disabled">Delete</span>
            </div>
          {% endif %}
        </div>

        <div class="card-footer small text-muted">
          {% if item.menu and item.menu.owner %}
            Owner: {{ item.menu.owner.get_username }}
          {% endif %}
        </div>
      </div>
    </div>
  </div>

  <div class="mt-3">
    <a href="javascript:history.back()" class="btn btn-outline-secondary">Back</a>
  </div>
  {% else %}
    <div class="alert alert-warning">Menu item not found.</div>
  {% endif %}
</div>
{% endblock %}